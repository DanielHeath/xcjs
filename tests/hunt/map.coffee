class Map extends XCNode
	constructor: () ->
		super()
		this.loadMap()
		
	loadMap: ->
	
		map = []
		`
		map.width = 20
		map.height = 20
		map.tileSize = 16
		map.tiles= [
			['#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#',],
			['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','@','@','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','@','@','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','@','@','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','@','@','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','@','@','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','.','.','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','.','.','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','.','.','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','.','.','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','@','@','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','@','@','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','@','@','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','@','@','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','@','@','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','@','@','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','.','@','@','@','@','.','.','.','.','.','.','.','.','.','.','.','.','.','#',],
			['#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#',],
			]
	`
		@width = map.width
		@height = map.height
		@gridSize = 16

		@tiles = new Array(@width)
		for i in [0 .. @width]
			@tiles[i] = new Array(@height)
			
		for x in [0 ... @width]
			for y in [0 ... @height]
				type = map.tiles[y][x]
				fileName = ""
				if type == "#"
					console.log('a wall')
					fileName = "resources/grave.png"
				else if type == "@"
					fileName = "resources/pumpkin.png"
				
				if fileName != ""
					console.log(x + ' ' + y)
					@tiles[x][y] = new GridEntity(fileName, this, type, x, y)
				else
					empty = []
					empty.type = "empty"
					@tiles[x][y] = "empty"
					
					
	moveableBlock: (block) ->  block.type != '#'
	
	getFreeSpace: ->
			x = Math.floor(Math.random() * @width)
			y = Math.floor(Math.random() * @height)
			console.log(x + ' ' + y)
			while @tiles[x][y] != 'empty'
				x = Math.floor(Math.random() * @width)
				y = Math.floor(Math.random() * @height)
				
			return {x: x, y: y}
